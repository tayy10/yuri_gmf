<!DOCTYPE html>
<html lang="zh-Hans">
<head>
    <meta charset="UTF-8">
    <title>{% if page.title %}{{page.title}}{% else %}{{site.title}}{% endif %}</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <!--添加百度-->
    <meta name="baidu-site-verification" content="sOhZbY9AJj" />
    <!--添加谷歌-->
    <meta name="google-site-verification" content="gI25vyO70Vad6i0uv323sbOlYrykpT2HAxO_lZIuV0s" />
    <!--添加bing-->
    <meta name="msvalidate.01" content="F220604F70BD9962B0E74C21F7322358" />
    <!--添加搜狗-->
    <meta name="sogou_site_verification" content="0ENPBY8X6S"/>
    <!--添加360搜索-->
    <meta name="360-site-verification" content="2556e02dee40785b967dcf85aafe242b" />
    <meta name="keywords" content="{% if page.keywords %}{{page.keywords}}{% else %}{{site.keywords}}{% endif %}">
    <meta name="description" content="{% if page.description %}{{page.description}}{% else %}{{site.description}}{% endif %}">
    <link rel="canonical" href="{{site.url}}{% if page.url != '/' %}{{ page.url }}{% else %}/index.html{% endif %}">
    <link rel="stylesheet" href="{{site.url}}/res/c/index.css#20170706">
    <script>(function(win,doc){win.YYRUM={};YYRUM.info={appId:'pAJOSEVdgDXi6N7Gzj4tAwu73Odayb08',beacon:'https://web.uyun.cn/connect',agent:'https://web.uyun.cn/buriedPoint/YYRUM.js'};var loadSource={createScript:function(src){var d=doc,f=d.getElementsByTagName('script')[0],s=d.createElement('script');s.type='text/javascript';s.src=src; f.parentNode.insertBefore(s,f);return s;}};var script=loadSource.createScript(YYRUM.info.agent);win.onerror=function(msg, url,line,col,error){YYRUM.info.errorData={msg:msg,url:url,line:line,col:col,error:error}};if(script.readyState){script.onreadystatechange=function(){if(script.readyState=='loaded'||script.readyState=='complete'){script.onreadystatechange=null; YYRUM.report.installGlobalHandler()}};}else{script.onload=function(){YYRUM.report.installGlobalHandler()};}})(window,document)</script>
    <!--添加百度推送-->
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>
</head>
<body>
    <div class="wrapper">
        <!-- 引入header部分 -->
        {% include header.html %}
            <!-- 内容部分 -->
        <div class="content-main" data-spy="scroll" data-target="#toc-container">
            <div class="content-1020 content-auto">
                {{ content | toc_generate }}  
            </div>         
        </div>
    </div>
    <script src="{{site.url}}/res/j/jquery.min.js#20170707"></script>
    <script src="{{site.url}}/res/j/bootstrap.min.js#20170706"></script>
    <!--<script src="/res/j/jquery.lazyload.js#20170706"></script>-->
    <!--<script src="/res/j/lazy.min.js"></script>-->
    <script>
        (function() {
            var _bodyEle = $('body'),
                _wrapperEle = $('.content-main');

            // window.onload = function() {
            //     _bodyEle.addClass("loaded");
            // }
            $(document).ready(function() {
                _bodyEle.addClass("loaded");
                // console.log($("img.lazy-load").lazyload);
                // $("img.lazy-load").lazyload();
            })

            // console.log(document.querySelector('.nav-logo-container'));
            var _navEle = $('.nav-logo-container'),
                _navContent = $('nav'),
                _closeEle = $('.nav-close');

            _navEle.bind('click', function () {
                _navEle.toggleClass("nav-close");
                _navContent.toggleClass("show");
            })

            // _navEle.onclick = function() {
            //     var _cls = _navEle.className;
            //     if (_cls.indexOf('nav-close') > -1) {
            //         _navEle.className = 'nav-logo-container';
            //         _navContent.className = "";
            //     }
            //     else {
            //         _navEle.className = 'nav-logo-container nav-close';
            //         _navContent.className = "show";
            //     }
            // };
            // _wrapperEle.bind('click', function() {
            //     _navEle.toggleClass("nav-close");
            //     _navContent.toggleClass("show");
            // })
            // _wrapperEle.onclick = function() {
            //     _navEle.className = 'nav-logo-container';
            //     _navContent.className = "";
            // }

            // document.querySelector('.nav-logo').click(function() {
            //     document.getElementsByTagName('nav')[0].classList.add('show');
            // });
            var icon_sidebar = $('.icon-sidebar'),
                _sidebar = $('#toc-container'),
                _content = $('.content-1020');
            
            if (_sidebar.length > 0) {
                _content.removeClass('content-auto');
            }

            // console.log(_sidebar);
            icon_sidebar.bind('click', function() {
                icon_sidebar.toggleClass('icon-active');
                _sidebar.toggleClass('sidebar-hidden');
                _content.toggleClass('content-auto');
            });


            $('.content-main').scroll(function() {
                var _s = $('.content-main').scrollTop();
                // console.log($('.content-main').scrollTop());
                if (_s > 0)
                    $('.icon-top').removeClass('hidden');
                else
                    $('.icon-top').addClass('hidden');

                // 简易的添加一个图片懒加载
                var _img = $('.lazy-load');

                _img.each(function() {
                    var _src = $(this).data('src'),
                        _imgTop = $(this).offset().top,
                        _windowHeight = $(window).height(),
                        _ifElse = (_s + _windowHeight) >= _imgTop + 200,
                        _t = this;
                    // this.src = _src;
                    if (_ifElse) {
                        this.src= _src;
                    }
                });
            });

            _wrapperEle.on('click', '.icon-top', function() {
                $('.content-main').animate({scrollTop: 0}, 500);
            });


            // $('.icon-top').click(function() {
            //     // console.log(111);
                
            // });
        })(window);
    </script>
</body>
</html>